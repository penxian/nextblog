---
title: ES2022æ–°ç‰¹æ€§ä¸€è§ˆ
date: 2022-11-01 00:32:48
tag: [ES2022, JavaScript]
categories: JavaScript
---
## æ–°å¢å†…ç½®ç´¢å¼•æ–¹æ³•.at()æ–¹æ³•
> æ–°å¢å†…ç½®ç´¢å¼•æ–¹æ³•.at()æ–¹æ³•[ğŸ“•](https://github.com/tc39/proposal-relative-indexing-method) 
```js
const cart = ['ğŸ', 'ğŸŒ', 'ğŸ'];

// ç¬¬ä¸€ä¸ªå…ƒç´ 
cart.at(0); // 'ğŸ'

// æœ€åä¸€ä¸ªå…ƒç´ 
cart.at(-1); // 'ğŸ'

// è¶Šç•Œäº†
cart.at(-100); // undefined 
cart.at(100); // undefined 
```
<!-- more -->
```js
const int8 = new Int8Array([0, 10, 42, -10]);

// ç¬¬ä¸€ä¸ªå…ƒç´  
int8.at(0); // 0

// æœ€åä¸€ä¸ªå…ƒç´ 
int8.at(-1); // -10

// è¶Šç•Œäº†
int8.at(-100) // undefined 
int8.at(100) // undefined
```
```js
const sentence = 'This is a sample sentence'

// ç¬¬ä¸€ä¸ªå…ƒç´   
sentence.at(0); // 'T'

// æœ€åä¸€ä¸ªå…ƒç´ 
sentence.at(-1); // 'e'

// è¶Šç•Œäº†
sentence.at(-100) // undefined
sentence.at(100) // undefined
```

## æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æŒ‡æ ‡
> æ•è·å­—ç¬¦ä¸²å¼€å§‹å’Œç»“æŸé¢å¤–ä¿¡æ¯çš„æŒ‡æ ‡ [ğŸ“•](https://github.com/tc39/proposal-regexp-match-indices)

```js
/(?<xs>x+)(?<ys>y+)/.exec('xxxyyxx');
/*[
  'xxxyy',
  'xxx',
  'yy',
  index: 0,
  input: 'xxxyyxx',
  groups: [Object: null prototype] { xs: 'xxx', ys: 'yy' }
]*/
```

```js
let input = "abcd";
let match = /b(c)/.exec(input);
let indices = match.indices;

// `indices` has the same length as match
indices.length === match.length

// The first element of `indices` contains the start/end indices of the match
indices[0]; // [1, 3];
input.slice(indices[0][0], indices[0][1]); // same as match[0]

// The second element of `indices` contains the start/end indices of the first capture
indices[1]; // [2, 3];
input.slice(indices[1][0], indices[1][1]); // same as match[1]);
```
## Object.hasOwn
> Objext.hasOwn [ğŸ“•](https://github.com/tc39/proposal-accessible-object-hasownproperty)
```js
let books = {}
books.prop = 'exists';

// `hasOwn` å¯¹ç›´æ¥æ˜¾æ€§åŸå‹å±æ€§è¿”å›true 
Object.hasOwn(books, 'prop');             // returns true
Object.hasOwn(books, 'toString');         // returns false
Object.hasOwn(books, 'hasOwnProperty');   // returns false

// The `in` å¯¹ç»§æ‰¿å±æ€§å’Œç›´æ¥å±æ€§éƒ½è¿”å›true
'prop' in books;                          // returns true
'toString' in books;                      // returns true
'hasOwnProperty' in books;                // returns true
```
## Error cause é”™è¯¯åŸå› 
> cause å±æ€§ä¸ºæ¥è¡¨æ˜é”™è¯¯çš„åŸå› [ğŸ“•](https://github.com/tc39/proposal-error-cause)

```js
const actual = new Error('a better error!', { cause: 'Error cause' });

actual instanceof Error; // true
actual.cause; // 'Error cause'
```
```js
try {
  maybeWorks();
} catch (err) {
  throw new Error('maybeWorks failed!', { cause: err });
}
```

## é¡¶çº§await
> åœ¨æ¨¡å—æ–¹æ³•å¤–é¢çš„await [ğŸ“•](https://github.com/tc39/proposal-top-level-await)

```js
// è¿™æ˜¯index.mjs

// å¤±è´¥
await Promise.resolve('ğŸ');
// â†’ SyntaxError: await is only valid in async function

// ä½¿ç”¨åŒ¿åå‡½æ•°åŒ…è£¹
(async function() {
  await Promise.resolve('ğŸ');
  // â†’ ğŸ‰
}());

// to top-level await æ”¯æŒä½¿ç”¨é¡¶çº§await
await Promise.resolve('ğŸ') // 'ğŸ'
```
```js
const i18n = await import(`./content-${language}.mjs`);
```
## Classå±æ€§å£°æ˜
> å…¬å…±å±æ€§å’Œç§æœ‰å±æ€§ç»„åˆæ··åˆä½¿ç”¨å£°æ˜ [ğŸ“•](https://github.com/tc39/proposal-class-fields)

```js
class SampleClass {
    /*
      ä»£æ›¿:
      constructor() { this.publicID = 42; }
    */
    publicID = 42; // public field

    /*
       ä»£æ›¿:
      static get staticPublicField() { return -1 }
    */
    static staticPublicField = -1;

    // static private field é™æ€ç§æœ‰å±æ€§
    static #staticPrivateField = 'private';

    //ä½¿ç”¨æ–¹æ³•
    #privateMethod() {}

    // static block
    static {
      // executed when the class is created å½“classåˆ›å»ºçš„æ—¶å€™æ‰§è¡Œ
    }
}
```

## ç¬¦åˆè¯­ä¹‰çš„æ£€æµ‹ç§æœ‰å±æ€§æ–¹å¼
> æ— é¡»è¡¨è¾¾å¼çš„æ£€æŸ¥ç±»å‹ [ğŸ“•](https://github.com/tc39/proposal-private-fields-in-in)
```js
class C {
  #brand;

  #method() {}

  get #getter() {}

  static isC(obj) {
    // in keyword to check
    return #brand in obj && #method in obj && #getter in obj;
  }
}
```
åŸæ–‡ï¼š[https://h3manth.com/ES2022/](https://h3manth.com/ES2022/)
